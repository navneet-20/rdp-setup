name: Ubuntu (runner)

on:
  workflow_dispatch:

jobs:
  ssh:
    runs-on: ubuntu-latest
    timeout-minutes: 600

    steps:
      - name: Start SSH (tmate)
        uses: mxschmitt/action-tmate@v3
        with:
          limit-access-to-actor: false
          keep-alive: true

      - name: Show SSH for 1 Minute
        run: |
          echo "⚠️ SSH info visible above — copy it within 60 seconds."
          sleep 60
          echo "⏱️ Hiding connection logs now."
          sudo -u runner tmate kill-session || true

      - name: Keep Alive (6 Hours)
        run: |
          echo "✅ SSH tunnel active. Runner will stay alive for 6 hours."
          sleep 21600
