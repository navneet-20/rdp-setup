name: Free RDP (RustDesk)

on:
  workflow_dispatch:

jobs:
  build:
    runs-on: windows-latest
    timeout-minutes: 360

    steps:
    - name: Download RustDesk (Fixed Direct Link)
      run: |
        $url = "https://github.com/rustdesk/rustdesk/releases/download/1.3.6/rustdesk-1.3.6-x86_64-pc-windows-msvc.zip"
        Invoke-WebRequest -Uri $url -OutFile rustdesk.zip
        Expand-Archive -Path rustdesk.zip -DestinationPath .
        Write-Host "âœ… RustDesk downloaded and extracted."

    - name: Run RustDesk
      run: |
        cd rustdesk-1.3.6-x86_64-pc-windows-msvc
        Start-Process -FilePath ".\rustdesk.exe"
        Write-Host "ðŸš€ RustDesk started. You can now check its UI via RustDesk ID."
        Write-Host "Wait a few minutes, then check the Actions logs for details."
        Start-Sleep -Seconds 21600   # 6 hours (keeps RDP alive)
